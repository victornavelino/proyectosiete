from django.db import models
from django.contrib import admin

class Modelo1(models.Model):
    campo_texto = models.CharField(max_length=255)

class Modelo2(models.Model):
    modelo1_relacionado = models.ForeignKey(Modelo1, on_delete=models.CASCADE)
    contenido = models.TextField(editable=False)  # Este campo no ser√° editable en el administrador

class Modelo2Admin(admin.ModelAdmin):
    list_display = ['id', 'modelo1_relacionado', 'contenido']
    readonly_fields = ['contenido']

    def save_model(self, request, obj, form, change):
        # Al guardar, copiar el contenido del campo_texto de la instancia relacionada
        obj.contenido = obj.modelo1_relacionado.campo_texto
        obj.save()

admin.site.register(Modelo1)
admin.site.register(Modelo2, Modelo2Admin)
